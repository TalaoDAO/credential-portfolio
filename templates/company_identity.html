<!DOCTYPE html>
<html>

<head>
    {% include 'head.html' %}

</head>

<body id="page-top" onload="pageOnload()">
    <div id="wrapper">
        <div class="d-flex flex-column" id="content-wrapper">
            <div id="content">

            {% with messages = get_flashed_messages(with_categories=true) %}
			    {% if messages %}
				    {% for category, message in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show m-0" role="alert">
                    <span>{{ message }}</span>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
				    {% endfor %}
			    {% endif %}
		    {% endwith %}
            {% if not session['role'] %}
                 {% include 'company_nav_bar.html' %}
            {% else %}
                {% include 'manager_nav_bar.html' %}
            {% endif %}

            role : {{session['role']}}<br>
            referent : {{session['referent']}}<br>
            username : {{session['username']}}

            <div class="container-fluid">
              <div class="text-center mt-3">
                <h3 class="text-dark mb-4">{{name}}
                  <a class="text-secondary" onclick="copyToClipboard('#p100')">
                    <i data-toggle="tooltip" style="font-size: 20px;" class="fa fa-clipboard " title="Copy public link to your Identity."></i>
                  </a>

                </h3>
                <p hidden id="p100">{{clipboard}}</p>
              </div>
                <div class="row">
                    <div class="col-xl-6 offset-xl-3">
                        <div class="card-deck">
                            <div class="card shadow mb-5">


                                <div class="card-body">
                                   <h4><img class="mx-auto d-block card-img" src="{{ url_for('send_file', filename=picturefile) }}"></h4>

                                    <div role="tablist" id="accordion-1">


                                        <div class="card">
                                            <div class="card-header" role="tab" data-toggle="tooltip" data-bs-tooltip="" title="Update your company details.">
                                                <h5 class="mb-0"><i class="fa fa-id-card"></i><a class="text-secondary" data-toggle="collapse" aria-expanded="false" aria-controls="accordion-1.item-1" href="#accordion-1 .item-1">&nbsp; Company Details</a></h5>
                                            </div>
                                            <div class="collapse item-1" role="tabpanel" data-parent="#accordion-1">
                                                <div class="card-body">
                                                    <p class="card-text">{{personal|safe}}</p>
                                                </div>
                                            </div>
                                        </div>


                                        {% if not session['role'] %}
                                        <div class="card">
                                            <div class="card-header" role="tab" data-toggle="tooltip" data-bs-tooltip="" title="Ask for a Proof of Identity to share data with third parties.">
                                                <h5 class="mb-0"><i class="fa fa-industry"></i><a class="text-secondary" data-toggle="collapse" aria-expanded="false" aria-controls="accordion-1.item-1" href="#accordion-1 .item-2">&nbsp; Proof of Identity</a></h5>
                                            </div>
                                            <div class="collapse item-2" role="tabpanel" data-parent="#accordion-1">
                                                <div class="card-body"><a href="#"></a>
                                                    <p class="card-text">{{kbis|safe}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}

                                        {% if not session['role'] %}
                                        <div class="card">
                                            <div class="card-header" role="tab" data-toggle="tooltip" data-bs-tooltip="" title="List of the core competencies or references of the company.">
                                                <h5 class="mb-0"><i class="fa fa-language"></i><a class="text-secondary" data-toggle="collapse" aria-expanded="false" aria-controls="accordion-1 .item-6"href="#accordion-1 .item-6">&nbsp; Core Competencies</a></h5>
                                            </div>
                                            <div class="collapse item-6" role="tabpanel" data-parent="#accordion-1">
                                                <div class="card-body">
                                                    <div style="overflow:auto;overflow-x: hidden;">
                                                        <p class="card-text">{{skills|safe}}</p>
                                                        <a href="/user/update_skills/">
                                                          <div class="form-group"><button class="btn btn-primary btn-sm pull-right" type="button">Update Competencies</button></div>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}

                                        {% if not session['role'] %}
 			                        	<div class="card">
                                            <div class="card-header" role="tab" title="List of all certificates issued by third parties." >
                                                <h5 data-toggle="tooltip" data-bs-tooltip="" class="mb-0" ><i class="fa fa-certificate"></i><a class="text-secondary" data-toggle="collapse" aria-expanded="false" aria-controls="accordion-1 .item-7" href="#accordion-1 .item-7">&nbsp; Credentials</a></h5>
                                            </div>
                                            <div class="collapse item-7" role="tabpanel" data-parent="#accordion-1">
                                                <div class="card-body">
													<p class="card-text">{{certificates|safe}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}


                                    </div>
                                </div>
                            </div>
                            <div class="card shadow mb-5">
                                <div class="card-body">

                                    <!--
                                    <div class="d-flex justify-content-center">
                                      <a href="/user/request_certificate/">
                                      <div class="form-group"><button class="btn btn-primary btn-md" type="button">Request a credential</button></div>
                                      </a>
                                    </div>
                                    -->

                                    <div role="tablist" id="accordion-2">
                                        {% if session['role'] == 'reviewer' %}
                                        <div class="card">
                                            <div class="card-header" role="tab">
                                                <h5 data-toggle="tooltip" data-bs-tooltip="" class="mb-0" title="Managers are allowed to sign on behalf of the company."><i class="fa fa-user-plus"></i><a class="text-secondary" data-toggle="collapse" aria-expanded="false" aria-controls="accordion-2 .item-1" href="#accordion-2 .item-1">&nbsp; Credentials to review</a></h5>
                                            </div>
                                            <div class="collapse item-1" role="tabpanel" data-parent="#accordion-2">
													<div class="card-body"><p class="card-text">{{credentials|safe}}</p></div>
                                            </div>
                                        </div>
                                        {% endif %}

                                        {% if session['role'] not in ['admin', 'reviewer', 'manager'] %}
                                        <div class="card">
                                            <div class="card-header" role="tab">
                                                <h5 data-toggle="tooltip" data-bs-tooltip="" class="mb-0" title="Managers are allowed to sign on behalf of the company."><i class="fa fa-user-plus"></i><a class="text-secondary" data-toggle="collapse" aria-expanded="false" aria-controls="accordion-2 .item-12" href="#accordion-2 .item-12">&nbsp; Administrators</a></h5>
                                            </div>
                                            <div class="collapse item-12" role="tabpanel" data-parent="#accordion-2">
													<div class="card-body"><p class="card-text">{{admin|safe}}</p></div>
                                            </div>
                                        </div>
                                        {% endif %}

                                        {% if session['role'] not in ['reviewer', 'manager'] %}
                                        <div class="card">
                                            <div class="card-header" role="tab">
                                                <h5 data-toggle="tooltip" data-bs-tooltip="" class="mb-0" title="Managers are allowed to sign on behalf of the company."><i class="fa fa-user-plus"></i><a class="text-secondary" data-toggle="collapse" aria-expanded="false" aria-controls="accordion-2 .item-1" href="#accordion-2 .item-1">&nbsp; Issuers</a></h5>
                                            </div>
                                            <div class="collapse item-1" role="tabpanel" data-parent="#accordion-2">
													<div class="card-body"><p class="card-text">{{manager|safe}}</p></div>
                                            </div>
                                        </div>
                                        {% endif %}

                                        {% if session['role'] not in ['reviewer'] %}
                                        <div class="card">
                                            <div class="card-header" role="tab">
                                                <h5 data-toggle="tooltip" data-bs-tooltip="" class="mb-0" title="Reviewers are allowed to validate on behalf of the company."><i class="fa fa-user-plus"></i><a class="text-secondary" data-toggle="collapse" aria-expanded="false" aria-controls="accordion-2 .item-5" href="#accordion-2 .item-5">&nbsp; Reviewers</a></h5>
                                            </div>
                                            <div class="collapse item-5" role="tabpanel" data-parent="#accordion-2">
													<div class="card-body"><p class="card-text">{{reviewer|safe}}</p></div>
                                            </div>
                                        </div>
                                        {% endif %}

                                        {% if session['role'] not in ['manager', 'reviewer'] %}
                                        <div class="card">
                                            <div class="card-header" role="tab">
                                                <h5 data-toggle="tooltip" data-bs-tooltip="" class="mb-0" title="Store company data (encrypted)."><i class="fa fa-database"></i><a class="text-secondary" data-toggle="collapse" aria-expanded="false" aria-controls="accordion-2 .item-4" href="#accordion-2 .item-4">&nbsp; File Store</a></h5>
                                            </div>
                                            <div class="collapse  item-4" role="tabpanel" data-parent="#accordion-2">
                                                <div class="card-body"><p class="card-text">{{digitalvault|safe}}</p></div>
                                            </div>
                                        </div>
                                        {% endif %}


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                                    {% include 'user_footer.html' %}
    </div>
   </div><a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a></div>
   <script src="{{ url_for('static', filename='jquery-3.5.1.slim.min.js') }}"></script>
   <script src="{{ url_for('static', filename='bs-init.js') }}"></script>
   <script src="{{ url_for('static', filename='bootstrap.min.js') }}"></script>
   <script src="{{ url_for('static', filename='in_progress_button.js') }}"></script>
   <script src="{{ url_for('static', filename='wc-talao.min.js') }}"></script>

    <script>function copyToClipboard(element) {
        var $temp = $("<input>");
        $("body").append($temp);
        $temp.val($(element).text()).select();
        document.execCommand("copy");
        $temp.remove();
      }</script>


  
<script src="{{ url_for('static', filename='wc-talao.min.js') }}"></script>
  
<script> function End() {
    window.onEnd();
    window.location.href = "/login/";
  }

  async function pageOnload(){
/*
  Manage download button depending on wallet connexion
*/
window.getAccountAddress();
const wc = await window.isConnected();
if (!wc)
{document.getElementById('button').innerHTML = "";}
}
  </script>



</body>

</html>
